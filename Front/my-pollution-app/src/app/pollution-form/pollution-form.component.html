<h2>{{ pollutionToEdit ? 'Modifier la pollution' : 'Ajouter une pollution' }}</h2>

<form [formGroup]="pollutionForm" (ngSubmit)="onSubmit()">

  <label>Titre :</label>
  <input type="text" formControlName="titre">
  
  <label>Type :</label>
  <select formControlName="type">
    <option value="">--S√©lectionnez--</option>
    <option *ngFor="let t of typesPollution" [value]="t">{{ t }}</option>
  </select>
  
  <label>Description :</label>
  <textarea formControlName="description"></textarea>
  
  <label>Date :</label>
  <input type="date" formControlName="dateObservation">
  
  <label>Lieu :</label>
  <input type="text" formControlName="lieu">
  
  <label>Latitude :</label>
  <input type="number" formControlName="latitude">
  
  <label>Longitude :</label>
  <input type="number" formControlName="longitude">
  
  <!-- Nouvelle section upload d'image -->
  <div class="image-upload-section">
    <label>Photo :</label>
    
    <!-- Pr√©visualisation de l'image -->
    <div *ngIf="imagePreview" class="image-preview-container">
      <img [src]="imagePreview" alt="Aper√ßu de la photo" class="image-preview">
      <div class="image-info">
        <p *ngIf="selectedFileName">Fichier: {{ selectedFileName }}</p>
      </div>
      <button type="button" (click)="removeImage()" class="btn-remove-image">
        ‚úï Supprimer la photo
      </button>
    </div>
    
    <!-- Upload button -->
    <button 
      type="button" 
      (click)="openFileDialog()"
      class="btn-upload"
      [disabled]="isUploadingImage">
      {{ isUploadingImage ? '‚è≥ Conversion en cours...' : 'üì∏ S√©lectionner une photo' }}
    </button>
    
    <!-- Input file cach√© -->
    <input 
      #fileInput
      type="file" 
      accept="image/*" 
      (change)="onImageSelected($event)"
      style="display: none;">
    
    <p class="help-text">Formats accept√©s: JPG, PNG, GIF, WebP (Max 5MB)</p>
  </div>
  
  <button type="submit" [disabled]="pollutionForm.invalid">
    {{ pollutionToEdit ? 'Mettre √† jour' : 'Ajouter' }}
  </button>
  <button type="button" (click)="cancel()">Annuler</button>
</form>
