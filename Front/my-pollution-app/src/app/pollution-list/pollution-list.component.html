<h1>Liste des pollutions</h1>

<div class="search-container">
  <input 
    #searchInput
    type="text" 
    placeholder="ğŸ” Rechercher par titre, lieu ou type..." 
    class="search-input">
  <span *ngIf="searchTerm" class="search-info">RÃ©sultats pour: <strong>{{ searchTerm }}</strong></span>
</div>

<button (click)="addNew()">+ Ajouter une pollution</button>

<ul>
  <li *ngFor="let p of (pollutions$ | async)">
    <strong (click)="showDetails(p)" style="cursor:pointer; color:blue">{{ p.titre }}</strong>
    â€” {{ p.type }} Ã  {{ p.lieu }}
    <button (click)="edit(p)">âœï¸ Modifier</button>
    <button (click)="delete(p)">ğŸ—‘ï¸ Supprimer</button>
    <button 
      (click)="toggleFavorite(p)" 
      [class.is-favorite]="isFavorite(p.id)"
      class="btn-favorite">
      {{ isFavorite(p.id) ? 'â¤ï¸ Retirer des favoris' : 'ğŸ¤ Ajouter aux favoris' }}
    </button>
  </li>
</ul>

<hr>

<app-pollution-form 
  *ngIf="showForm" 
  [pollutionToEdit]="pollutionToEdit" 
  (formSubmitted)="formClosed()">
</app-pollution-form>



<app-pollution-recap 
  *ngIf="selectedPollution" 
  [pollutionData]="selectedPollution"
  (homeClicked)="selectedPollution = null">
</app-pollution-recap>

